version: 2
jobs:
  build:
    docker:
      - image: jpbernius/pandoc
    steps:
      - checkout

      # The docker image does not correctly install the fvextra latex
      # package. We pull fvextra.sty from the maintainer so we can use in the
      # build process.
      - run: "git clone https://github.com/gpoore/fvextra.git; cp fvextra/fvextra/fvextra.sty ./"

      # Docker image is missing graphviz, which we need to use to build images.
      - run: "apt install graphviz"

      # Build our documents.
      - run: make all
      - store_artifacts:
          path: build
